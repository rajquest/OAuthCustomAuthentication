# OAuthCustomAuthentication
OAuth custom Authentication without providing username and password credentials using .Net 5, IdentityServer4, OpenID. Instead uses a dynamic secret key that a device can send to perform authentication and authorization. The secret key could contain a hash value with a specific combination of runtime values generated by the device which can then be reproduced at the server from values stored in a database and compared for authenticty

# Custom Token Request Validation and Issuance
You can run custom code as part of the token issuance pipeline at the token endpoint. This allows e.g. for

* adding additional validation logic
* changing certain parameters (e.g. token lifetime) dynamically

For this purpose, implement (and register) the ICustomTokenRequestValidator interface:

- - - -

```javascript
/// <summary>
/// Allows inserting custom validation logic into token requests
/// </summary>
public interface ICustomTokenRequestValidator
{
    /// <summary>
    /// Custom validation logic for a token request.
    /// </summary>
    /// <param name="context">The context.</param>
    /// <returns>
    /// The validation result
    /// </returns>
    Task ValidateAsync(CustomTokenRequestValidationContext context);
}

```

The context object gives you access to:

* adding custom response parameters
* return an error and error description
* modifying the request parameters, e.g. access token lifetime and type, client claims, and the confirmation method
* 
You can register your implementation of the validator using the AddCustomTokenRequestValidator extension method on the configuration builder.

POSTMAN Token Request for Custom Validation Screenshot

![token request screenshot](https://github.com/rajquest/OAuthCustomAuthentication/blob/master/OAuthCustomAuthentication/images/gitPics/postmanTokenRequest.PNG?raw=true)

Use Bearer Token to invoke API's thereafter to Authorize requests by providing the valid Bearer Token value

![API Request Screenshot](https://github.com/rajquest/OAuthCustomAuthentication/blob/master/OAuthCustomAuthentication/images/gitPics/WebAPIRequest.PNG)

- - - -
# Resource Owner Password Validation

If you want to use the OAuth 2.0 resource owner password credential grant (aka password), you need to implement and register the IResourceOwnerPasswordValidator interface:


```javascript
/// <summary>
/// Allows inserting custom validation logic into token requests
/// </summary>
public interface IResourceOwnerPasswordValidator
{
    /// <summary>
    /// Validates the resource owner password credential
    /// </summary>
    /// <param name="context">The context.</param>
    Task ValidateAsync(ResourceOwnerPasswordValidationContext context);
}
```
**POSTMAN Token Request Endpoint for Password Grant Example**

The OAuth 2.0 resource owner password grant allows a client to send username and password to the token service and get an access token back that represents that user.

![token request screenshot](https://github.com/rajquest/OAuthCustomAuthentication/blob/master/OAuthCustomAuthentication/images/gitPics/postmanPasswordGrantTokenRequest.PNG?raw=true)
